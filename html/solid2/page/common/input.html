<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>컴포넌트 가이드</title>
    <link rel="stylesheet" href="../../../../images/web/css/solid2/tokens.css">
    <link rel="stylesheet" href="../../../../images/web/css/solid2/common.css">
  

</head>
<body>
    <!-- 
    ============================================
    개발 시 주의사항
    ============================================
    
    [접근성 관련 중요 사항]
    - id와 for 속성은 정적으로 작성해야 함
    - DOM 로드 후 동적으로 id/for 값을 변경하면 안됨
    - 이유: 낮은 버전의 보이스오버(VoiceOver)에서 매치 인식 실패
    
    [카드번호 입력 필드 구성]
    - 4개의 input 필드로 구성 (XXXX-XXXX-XXXX-XXXX)
    - 각 필드는 숫자만 입력 가능 (inputmode="numeric", pattern="[0-9]")
    - 스크린 리더용 label은 blind 클래스로 숨김 처리
    
    [상태별 클래스]
    - 기본: input-field-quad
    - 에러: input-field-quad error
    - 비활성화: input-field-quad disabled  
    - 읽기전용: input-field-quad readonly
    - 포커스: input-field-quad focus (자동 추가/제거)
    
    [애니메이션]
    - 포커스 시 SVG border 애니메이션 실행
    - 에러/비활성화/읽기전용 상태에서는 애니메이션 비활성화
    - 애니메이션 속도: 1000ms, easing: cubic-bezier(0.2, 0, 0, 1.0)
    
    ============================================
    -->
    <div style="width: 100%;padding:50px;">
        <p>4가지 타입 text</p>
        <div class="input-container">
            <div class="input-field input-field-quad" role="group">  
                <label class="blind" for="input1">카드번호 첫 번째 자리</label>
                <input type="text" id="input1" placeholder="첫 번째 입력" inputmode="numeric" pattern="[0-9]">
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="input2">카드번호 두 번째 자리</label>
                <input type="text" id="input2" placeholder="두 번째 입력" inputmode="numeric" pattern="[0-9]">
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="input3">카드번호 세 번째 자리</label>
                <input type="text" id="input3" placeholder="세 번째 입력" inputmode="numeric" pattern="[0-9]">
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="input4">카드번호 네 번째 자리</label>
                <input type="text" id="input4" placeholder="네 번째 입력" inputmode="numeric" pattern="[0-9]">
            </div>
        </div>
        <p>에러일때. 뒤에 password 2개</p>
        <div class="input-container">
            <div class="input-field input-field-quad error" role="group">  
                <label class="blind" for="error-input1">카드번호 첫 번째 자리</label>
                <input type="text" id="error-input1" placeholder="첫 번째 입력" inputmode="numeric" pattern="[0-9]" aria-invalid="true">
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="error-input2">카드번호 두 번째 자리</label>
                <input type="text" id="error-input2" placeholder="두 번째 입력" inputmode="numeric" pattern="[0-9]" aria-invalid="true">
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="error-input3">카드번호 세 번째 자리</label>
                <input type="password" id="error-input3" placeholder="세 번째 입력" inputmode="numeric" pattern="[0-9]" aria-invalid="true">
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="error-input4">카드번호 네 번째 자리</label>
                <input type="password" id="error-input4" placeholder="네 번째 입력" inputmode="numeric" pattern="[0-9]" aria-invalid="true">
            </div>
            <div id="error-message-1" class="blind" role="alert" aria-live="polite">
                입력값이 올바르지 않습니다. 다시 확인해주세요.
            </div>
        </div>
        <p>디세이블.</p>
        <div class="input-container">
            <div class="input-field input-field-quad disabled" role="group">  
                <label class="blind" for="disabled-input1">카드번호 첫 번째 자리</label>
                <input type="text" id="disabled-input1" placeholder="첫 번째 입력" inputmode="numeric" pattern="[0-9]" disabled>
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="disabled-input2">카드번호 두 번째 자리</label>
                <input type="text" id="disabled-input2" placeholder="두 번째 입력" inputmode="numeric" pattern="[0-9]" disabled>
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="disabled-input3">카드번호 세 번째 자리</label>
                <input type="password" id="disabled-input3" placeholder="세 번째 입력" inputmode="numeric" pattern="[0-9]" disabled>
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="disabled-input4">카드번호 네 번째 자리</label>
                <input type="password" id="disabled-input4" placeholder="네 번째 입력" inputmode="numeric" pattern="[0-9]" disabled>
            </div>
            <div id="disabled-message" class="blind" aria-live="polite">
                현재 입력할 수 없습니다.
            </div>
        </div>
        <p>리드온리.</p>
        <div class="input-container">
            <div class="input-field input-field-quad readonly" role="group">  
                <label class="blind" for="readonly-input1">카드번호 첫 번째 자리</label>
                <input type="text" id="readonly-input1" placeholder="첫 번째 입력" inputmode="numeric" pattern="[0-9]" readonly>
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="readonly-input2">카드번호 두 번째 자리</label>
                <input type="text" id="readonly-input2" placeholder="두 번째 입력" inputmode="numeric" pattern="[0-9]" readonly>
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="readonly-input3">카드번호 세 번째 자리</label>
                <input type="password" id="readonly-input3" placeholder="세 번째 입력" inputmode="numeric" pattern="[0-9]" readonly>
                <span class="input-dash" aria-hidden="true">-</span>
                <label class="blind" for="readonly-input4">카드번호 네 번째 자리</label>
                <input type="password" id="readonly-input4" placeholder="네 번째 입력" inputmode="numeric" pattern="[0-9]" readonly>
            </div>
            <div id="readonly-message" class="blind" aria-live="polite">
                읽기 전용입니다. 수정할 수 없습니다.
            </div>
        </div>

    </div>
    
    <!-- Animated Border Script -->
    <script src="../../../../script/components/input-field/animated-border.js"></script>
    
    <script>
        // 이 파일의 클래스 구조에 맞게 애니메이션 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // 기존 애니메이션 인스턴스가 있다면 정리
            if (window.animatedBorderInputField) {
                window.animatedBorderInputField.cleanup();
            }
            
            // 이 파일의 클래스 구조에 맞게 새로운 인스턴스 생성
            window.animatedBorderInputField = new AnimatedBorderInputField({
                borderColor: '#005DF9',           // 기본 border 색상
                errorColor: '#E53838',            // 에러 상태 border 색상
                borderWidth: 2,                   // border 두께
                animationDuration: 1000,          // 애니메이션 지속 시간 (ms)
                borderRadius: 6,                  // 기본 border-radius (px)
                disabledClass: 'disabled',        // 비활성화 클래스
                errorClass: 'error',              // 에러 클래스
                readonlyClass: 'readonly',        // 읽기전용 클래스
                containerSelector: '.input-field', // 컨테이너 셀렉터
                inputSelector: 'input'            // input 태그 셀렉터 (클래스가 아닌 태그)
            });
            
            console.log('애니메이션 스크립트가 적용되었습니다!');
            console.log('입력 필드에 포커스를 주면 애니메이션을 확인할 수 있습니다.');
        });
        
        // 포커스 이벤트 로깅 및 클래스 관리
        document.addEventListener('focusin', (e) => {
            if (e.target.matches('input')) {
                const inputField = e.target.closest('.input-field');
                if (inputField) {
                    inputField.classList.add('focus');
                    console.log('포커스됨:', e.target.placeholder || '입력 필드');
                }
            }
        });

        document.addEventListener('focusout', (e) => {
            if (e.target.matches('input')) {
                const inputField = e.target.closest('.input-field');
                if (inputField) {
                    // 약간의 지연을 두고 포커스 상태를 확인
                    setTimeout(() => {
                        const otherInputs = inputField.querySelectorAll('input');
                        const hasFocus = Array.from(otherInputs).some(inputEl => 
                            inputEl === document.activeElement
                        );
                        
                        // 다른 input에 포커스가 없으면 focus 클래스 제거
                        if (!hasFocus) {
                            inputField.classList.remove('focus');
                            console.log('포커스 해제됨:', e.target.placeholder || '입력 필드');
                        }
                    }, 10);
                }
            }
        });
    </script>
    
</body>
</html>