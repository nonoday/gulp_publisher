<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OverflowMenu Component</title>
    <style>
/* Demo container styles */
.demo-container {
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.demo-section {
  margin-bottom: 30px;
}

.demo-section h3 {
  margin-bottom: 15px;
  color: #333;
  font-size: 18px;
  font-weight: 600;
}

.demo-row {
  margin-bottom: 20px;
  padding: 20px;
  background-color: #f8f9fa;
  border-radius: 8px;
  position: relative;
}

.demo-label {
  display: block;
  margin-bottom: 10px;
  font-size: 14px;
  color: #666;
  font-weight: 500;
}

/* Trigger button styles */
.trigger-button {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  margin-bottom: 10px;
}

.trigger-button:hover {
  background-color: #0056b3;
}

.trigger-button:active {
  background-color: #004085;
}

/* Interactive demo */
.interactive-demo {
  position: relative;
  min-height: 200px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .demo-row {
    padding: 15px;
  }
}
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>OverflowMenu Component</h1>
        
        <!-- Basic OverflowMenu -->
        <div class="demo-section">
            <h3>Basic OverflowMenu</h3>
            
            <div class="demo-row">
                <span class="demo-label">Default OverflowMenu</span>
                <button class="trigger-button" id="trigger1">ë©”ë‰´ ì—´ê¸°</button>
                <overflow-menu-component id="menu1" placement="bottom-right"></overflow-menu-component>
            </div>
        </div>
        
        <!-- Placement Variants -->
        <div class="demo-section">
            <h3>Placement Variants</h3>
            
            <div class="demo-row">
                <span class="demo-label">Top Placements</span>
                <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <button class="trigger-button" id="trigger2">Top Left</button>
                    <button class="trigger-button" id="trigger3">Top Center</button>
                    <button class="trigger-button" id="trigger4">Top Right</button>
                </div>
                
                <overflow-menu-component id="menu2" placement="top-left"></overflow-menu-component>
                <overflow-menu-component id="menu3" placement="top-center"></overflow-menu-component>
                <overflow-menu-component id="menu4" placement="top-right"></overflow-menu-component>
            </div>
            
            <div class="demo-row">
                <span class="demo-label">Bottom Placements</span>
                <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <button class="trigger-button" id="trigger5">Bottom Left</button>
                    <button class="trigger-button" id="trigger6">Bottom Center</button>
                    <button class="trigger-button" id="trigger7">Bottom Right</button>
                </div>
                
                <overflow-menu-component id="menu5" placement="bottom-left"></overflow-menu-component>
                <overflow-menu-component id="menu6" placement="bottom-center"></overflow-menu-component>
                <overflow-menu-component id="menu7" placement="bottom-right"></overflow-menu-component>
            </div>
        </div>
        
        <!-- Menu Item Variants -->
        <div class="demo-section">
            <h3>Menu Item Variants</h3>
            
            <div class="demo-row">
                <span class="demo-label">Different Menu Item Types</span>
                <button class="trigger-button" id="trigger8">ë©”ë‰´ ì•„ì´í…œ ë³´ê¸°</button>
                <overflow-menu-component id="menu8" placement="bottom-right"></overflow-menu-component>
            </div>
        </div>
        
        <!-- Max Width Behavior -->
        <div class="demo-section">
            <h3>Max Width Behavior</h3>
            
            <div class="demo-row">
                <span class="demo-label">Long Text Menu (Max Width Reached)</span>
                <button class="trigger-button" id="trigger9">ê¸´ í…ìŠ¤íŠ¸ ë©”ë‰´</button>
                <overflow-menu-component id="menu9" placement="bottom-right" max-width="true"></overflow-menu-component>
            </div>
        </div>
        
        <!-- Interactive Demo -->
        <div class="demo-section">
            <h3>Interactive Demo</h3>
            
            <div class="demo-row interactive-demo">
                <span class="demo-label">í´ë¦­í•˜ì—¬ ë©”ë‰´ ìœ„ì¹˜ ë³€ê²½</span>
                <button class="trigger-button" id="trigger10">ì¸í„°ë™í‹°ë¸Œ ë©”ë‰´</button>
                <overflow-menu-component id="menu10" placement="bottom-right"></overflow-menu-component>
            </div>
        </div>
    </div>

    <script>
        // ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì™„ë£Œ í›„ ì´ˆê¸°í™”
        function initializeAfterScriptLoad() {
            console.log('ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì™„ë£Œ, ì´ˆê¸°í™” ì‹œì‘');
            initializeOverflowMenus();
        }
        
        // ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì‹¤íŒ¨ ì²˜ë¦¬
        function handleScriptError() {
            console.error('ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì‹¤íŒ¨, ì ˆëŒ€ ê²½ë¡œë¡œ ì¬ì‹œë„');
            // ì ˆëŒ€ ê²½ë¡œë¡œ ì¬ì‹œë„
            const script = document.createElement('script');
            script.src = '/script/components/overflow-menu/overflow-menu-component.js';
            script.onload = initializeAfterScriptLoad;
            script.onerror = () => console.error('ì ˆëŒ€ ê²½ë¡œë¡œë„ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì‹¤íŒ¨');
            document.head.appendChild(script);
        }
    </script>
    
    <script src="../../../script/components/overflow-menu/overflow-menu-component.js" 
            onerror="handleScriptError()"
            onload="initializeAfterScriptLoad()"></script>
    
    <script>
        // DOM ë¡œë“œ ì™„ë£Œ í›„ì—ë„ ì´ˆê¸°í™” ì‹œë„
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM ë¡œë“œ ì™„ë£Œ');
            // ìŠ¤í¬ë¦½íŠ¸ê°€ ì´ë¯¸ ë¡œë“œë˜ì—ˆë‹¤ë©´ ë°”ë¡œ ì´ˆê¸°í™”
            if (customElements.get('overflow-menu-component')) {
                console.log('ì›¹ì»´í¬ë„ŒíŠ¸ ì´ë¯¸ ì •ì˜ë¨, ì´ˆê¸°í™” ì‹œì‘');
                initializeOverflowMenus();
            }
        });

        function initializeOverflowMenus() {
            console.log('OverflowMenu ì´ˆê¸°í™” í•¨ìˆ˜ ì‹¤í–‰');
            
            // ì›¹ì»´í¬ë„ŒíŠ¸ê°€ ì •ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸
            if (!customElements.get('overflow-menu-component')) {
                console.error('OverflowMenuComponentê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ê¸°ë³¸ ë©”ë‰´ë“¤ ì´ˆê¸°í™”
            const menu1 = document.getElementById('menu1');
            const trigger1 = document.getElementById('trigger1');
            console.log('menu1:', menu1, 'trigger1:', trigger1);
            console.log('menu1ì˜ setTriggerElement ë©”ì„œë“œ:', typeof menu1?.setTriggerElement);
            
            if (menu1 && trigger1 && typeof menu1.setTriggerElement === 'function') {
                menu1.setTriggerElement(trigger1);
                console.log('menu1 íŠ¸ë¦¬ê±° ì„¤ì • ì™„ë£Œ');
            } else {
                console.error('menu1 ë˜ëŠ” trigger1ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ setTriggerElement ë©”ì„œë“œê°€ ì—†ìŠµë‹ˆë‹¤.');
            }

            // ë‹¤ë¥¸ ë©”ë‰´ë“¤ë„ ë™ì¼í•˜ê²Œ ì´ˆê¸°í™”
            const menuTriggerPairs = [
                ['menu2', 'trigger2'],
                ['menu3', 'trigger3'],
                ['menu4', 'trigger4'],
                ['menu5', 'trigger5'],
                ['menu6', 'trigger6'],
                ['menu7', 'trigger7'],
                ['menu8', 'trigger8'],
                ['menu9', 'trigger9'],
                ['menu10', 'trigger10']
            ];

            menuTriggerPairs.forEach(([menuId, triggerId]) => {
                const menu = document.getElementById(menuId);
                const trigger = document.getElementById(triggerId);
                console.log(`${menuId}:`, menu, `${triggerId}:`, trigger);
                
                if (menu && trigger && typeof menu.setTriggerElement === 'function') {
                    menu.setTriggerElement(trigger);
                    console.log(`${menuId} íŠ¸ë¦¬ê±° ì„¤ì • ì™„ë£Œ`);
                } else {
                    console.error(`${menuId} ë˜ëŠ” ${triggerId}ë¥¼ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ setTriggerElement ë©”ì„œë“œê°€ ì—†ìŠµë‹ˆë‹¤.`);
                }
            });

            // ê° ë©”ë‰´ì— ì ì ˆí•œ ë©”ë‰´ ì•„ì´í…œ ì„¤ì •
            const menu8 = document.getElementById('menu8');
            if (menu8) {
                menu8.setMenuItems([
                    { text: 'í´ë” ì—´ê¸°', icon: 'ğŸ“' },
                    { text: 'ì €ì¥', icon: 'ğŸ’¾' },
                    { text: 'ìƒˆë¡œê³ ì¹¨', icon: 'ğŸ”„' },
                    { type: 'divider' },
                    { text: 'ì„¤ì •', icon: 'âš™ï¸' },
                    { text: 'ë¹„í™œì„±í™”', icon: 'ğŸš«', danger: true },
                    { type: 'divider' },
                    { text: 'ì ê¸ˆ (ë¹„í™œì„±í™”)', icon: 'ğŸ”’', disabled: true }
                ]);
            }

            // ì¸í„°ë™í‹°ë¸Œ ë©”ë‰´ ì„¤ì •
            const interactiveMenu = document.getElementById('menu10');
            if (interactiveMenu) {
                interactiveMenu.setMenuItems([
                    { text: 'Top Leftë¡œ ì´ë™', icon: 'â¬†ï¸' },
                    { text: 'Top Centerë¡œ ì´ë™', icon: 'â¬†ï¸' },
                    { text: 'Top Rightë¡œ ì´ë™', icon: 'â¬†ï¸' },
                    { type: 'divider' },
                    { text: 'Bottom Leftë¡œ ì´ë™', icon: 'â¬‡ï¸' },
                    { text: 'Bottom Centerë¡œ ì´ë™', icon: 'â¬‡ï¸' },
                    { text: 'Bottom Rightë¡œ ì´ë™', icon: 'â¬‡ï¸' }
                ]);
            }

            // ê¸´ í…ìŠ¤íŠ¸ ë©”ë‰´ ì„¤ì •
            const longTextMenu = document.getElementById('menu9');
            if (longTextMenu) {
                longTextMenu.setMenuItems([
                    { text: 'ë§¤ìš° ê¸´ ë©”ë‰´ ì•„ì´í…œ í…ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤' },
                    { text: 'ë˜ ë‹¤ë¥¸ ê¸´ ë©”ë‰´ ì•„ì´í…œ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤' },
                    { text: 'ì„¸ ë²ˆì§¸ ê¸´ ë©”ë‰´ ì•„ì´í…œ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤' }
                ]);
            }

            // ë©”ë‰´ ì•„ì´í…œ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.addEventListener('menu-item-click', function(event) {
                console.log('ë©”ë‰´ ì•„ì´í…œ í´ë¦­ë¨:', event.detail.text);
                
                // ì¸í„°ë™í‹°ë¸Œ ë©”ë‰´ì˜ ìœ„ì¹˜ ë³€ê²½ ê¸°ëŠ¥
                if (event.detail.text.includes('ì´ë™')) {
                    const placement = event.detail.text.split(' ')[0].toLowerCase().replace('ë¡œ', '');
                    changeMenuPlacement('menu10', placement);
                }
            });
        }

        // ë©”ë‰´ ìœ„ì¹˜ ë³€ê²½ í•¨ìˆ˜
        function changeMenuPlacement(menuId, placement) {
            const menu = document.getElementById(menuId);
            if (menu) {
                menu.placement = placement;
            }
        }
    </script>
</body>
</html>
